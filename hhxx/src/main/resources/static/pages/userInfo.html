<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <title>个人信息</title>
    <link rel="stylesheet" type="text/css" href="../login/css/normalize.css" />
    <link rel="stylesheet" type="text/css" href="../login/css/demo.css" />
    <!--必要样式-->
    <link rel="stylesheet" type="text/css" href="../login/css/component.css" />
    <link rel="stylesheet" type="text/css" href="../layui/css/layui.css" />
    <script type="text/javascript" src="../jquery/jquery.min.js"></script>
    <script type="text/javascript" src="../layui/layui.js"></script>
    <style>
        .wyp-label {
            float: left;
            display: block;
            padding: 9px 15px;
            font-weight: 400;
            line-height: 20px;
            text-align: right;
        }
        .wyp-form-label{float:left;display:block;padding:9px 1px;width:80px;font-weight:400;line-height:20px;text-align:center}
        .wyp-input-block{margin-left:90px;min-height:36px}
        .wyp-label2 {
            float: left;
            display: block;
            padding: 10px 2px;
            font-weight: 400;
            line-height: 20px;
            text-align: right;
        }
        .bar6 input {
            height: 42px;
            width: 300px;
            /*#c5464a*/
            border: 2px solid #fffef93b;
            border-radius: 5px;
            background: transparent;
            color: #C0C0C0;
            top: 0;
            right: 0;
        }
        .bar6 input::-webkit-input-placeholder {
            color: #C0C0C0;
            font-size: 16px;
        }


        .bar6 button {
            background: #46c5a929;
            border-radius: 12px 12px 12px 12px;
            width: 65px;
            height: 40px;
            top: 0;
            right: 0;
        }
        .bar6 button:before {
            content: "搜索";
            font-size: 16px;
            color: #F9F0DA;
        }
        .layui-nav *{font-size:15px}
        .layui-card-wyp1-body {
            position: relative;
            padding: 3px 20px;
            line-height: 25px;
        }
        .layui-card-wyp2-body {
            position: relative;
            padding: 0px 10px;
            line-height: 25px;
        }
    </style>

</head>


<body>
<ul class="layui-nav" style="background-color: #464646">
    <li class="layui-nav-item"><a href="blogindex.html" ><img style="width: 200px" src="../img/yujiblog.png"></a></li>
    <li class="layui-nav-item "><a href="blogCommon.html">技术分享</a></li>
    <li class="layui-nav-item"><a href="life.html">生活乐趣</a></li>
    <li class="layui-nav-item">
        <a href="moodEssay.html">心情随笔</a>
        <!--<dl class="layui-nav-child">-->
            <!--<dd><a href="">移动模块</a></dd>-->
            <!--<dd><a href="">后台模版</a></dd>-->
            <!--<dd><a href="">电商平台</a></dd>-->
        <!--</dl>-->
    </li>
    <li class="layui-nav-item"><a href="discuss.html">留言</a></li>
    <li class="layui-nav-item"><a href="aboutMe.html">关于我</a></li>
    <li class="layui-nav-item bar6" style="margin-left: 10px" ><input type="text"  placeholder="请输入您要搜索的内容..." ><button type="submit" ></button></li>
    <li class="layui-nav-item" style="float:right;" >
        <a href="javascript:;" id="nameOne"></a>
    </li>
    <li class="layui-nav-item" style="float:right;" >
        <a href="javascript:;"><img class="layui-nav-img" src="../img/头像.png"></a>
        <dl class="layui-nav-child">
            <dd><a href="userInfo.html">个人中心</a></dd>
            <dd><a href="blogAdmin.html">博客管理</a></dd>
            <dd><a href="myCollection.html">我的收藏</a></dd>
            <dd><a href="myFlow.html">我的关注</a></dd>
            <dd><a href="login.html">注销</a></dd>
        </dl>
    </li>
    <li class="layui-nav-item" style="float:right;"><a href="uploadBlog.html">写博客</a></li>
</ul>

<div class="layui-row">
    <div class="layui-col-xs4">
        <div class="grid-demo grid-demo-bg1">
            <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
                <legend style="font-size:40px">个人信息</legend>
            </fieldset>
            <div class="layui-row">
                <div class="layui-col-xs2">
                <dl style="text-align: center;">
                    <dt style="font-size:20px">博客数</dt>
                    <dd id="blogSum">0</dd>
                </dl>
                </div>
                <div class="layui-col-xs2">
                <dl style="text-align: center;">
                    <dt style="font-size:20px">粉丝数</dt>
                    <dd id="fansSum">0</dd>
                </dl>
                </div>
                <div class="layui-col-xs2">
                <dl style="text-align: center;">
                    <dt style="font-size:20px">关注数</dt>
                    <dd id="flowSum">0</dd>
                </dl>
                </div>
                <div class="layui-col-xs2" >
                <dl style="text-align: center;">
                    <dt style="font-size:20px">收藏数</dt>
                    <dd id="collectionsSum">0</dd>
                </dl>
                </div>
                <div class="layui-col-xs2">
                <dl style="text-align: center;">
                    <dt style="font-size:20px">获赞数</dt>
                    <dd id="fablousSum">0</dd>
                </dl>
                </div>
                <div class="layui-col-xs2">
                <dl style="text-align: center;">
                    <dt style="font-size:20px">访问量</dt>
                    <dd id="visitSum">0</dd>
                </dl>
                </div>

            </div>
            <div class="layui-form-item">
            </div>
            <br>
            <div class="layui-form-item" style="margin-left: 50px">
                <label class="wyp-label" style="font-size:20px">用户名:</label>
                <label id="userName" class="wyp-label" style="font-size:20px"></label>
            </div>
            <div class="layui-form-item" style="margin-left: 50px">
                <label class="wyp-label" style="font-size:20px">手机号:</label>
                <label id="phone" class="wyp-label" style="font-size:20px"></label>
            </div>
            <div class="layui-form-item" style="margin-left: 50px">
                <label class="wyp-label" style="font-size:20px">邮&nbsp;&nbsp;&nbsp;&nbsp;箱:</label>
                <label id="email" class="wyp-label" style="font-size:20px"></label>
            </div>
            <div class="layui-form-item" style="margin-left: 50px">
                <label class="wyp-label" style="font-size:20px">性&nbsp;&nbsp;&nbsp;&nbsp;别:</label>
                <label id="sex" class="wyp-label" style="font-size:20px"></label>
            </div>
            <div class="layui-form-item" style="margin-left: 50px">
                <label class="wyp-label" style="font-size:20px">职&nbsp;&nbsp;&nbsp;&nbsp;业:</label>
                <label id="trade" class="wyp-label" style="font-size:20px"></label>
            </div>
            <div class="layui-form-item" style="margin-left: 50px">
                <label class="wyp-label" style="font-size:20px">简&nbsp;&nbsp;&nbsp;&nbsp;介:</label>
                <label id="introduction" class="wyp-label" style="font-size:20px"></label>
            </div>
            <div class="layui-form-item" style="margin-left: 50px">
                <label class="wyp-label" style="font-size:20px">注册时间:</label>
                <label id="creatDate" class="wyp-label" style="font-size:20px"></label>
            </div>
            <div class="layui-form-item" style="margin-left: 350px">
                <button id="updateInfo" class="layui-btn layui-btn-primary layui-btn-radius" type="button">修改个人资料</button>
            </div>

        </div>
    </div>
    <div class="layui-col-xs8">
        <div class="grid-demo">
            <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px; border-color:#5FB878">
                <legend style="font-size:40px">我的博客</legend>
            </fieldset>
        </div>
        <div class="layui-card" id="div1" style="margin-left: 40px;margin-right: 20px;display: block">
            <div id="blogId1" style="display:none"></div>
            <div class="layui-card-wyp-header" style="font-size:25px;background-color: #72939a;"><a href="" id="blogName1" style="color: #f1f1f1">博客名</a></div>
            <div class="layui-card-wyp1-body" style="font-size:20px;background-color: #72939a;"><a href="" id="content1" style="color: #f1a77b">博客内容</a></div>
            <div class="layui-card-wyp2-body layui-icon" style="font-size:13px;background-color: #72939a">
                <a href="" class="layui-icon-note" id="blogType1" style="margin-left: 5px;color: #e0cce2">技术分享</a>
                <a href="javascript:" class="layui-icon-date" id="time1" style="margin-left: 280px;color: #e0cce2">上传时间:2019.11.5</a>
                <a href="javascript:" class="layui-icon-rate" id="collections1" style="margin-left: 30px;color: #e0cce2">收藏(0)</a>
                <a href="javascript:" class="layui-icon-praise" id="fabulous1" style="margin-left: 30px;color: #e0cce2">点赞(0)</a>
                <a href="javascript:" class="layui-icon-reply-fill" id="comments1" style="margin-left: 30px;color: #e0cce2">评论(0)</a>
                <a href="javascript:" class="layui-icon-read" id="visit1" style="margin-left: 30px;color: #e0cce2">浏览(0)</a>
            </div>
        </div>
        <div class="layui-card" id="div2" style="margin-left: 40px;margin-right: 20px;display: block">
            <div id="blogId2" style="display:none"></div>
            <div class="layui-card-wyp-header" style="font-size:25px;background-color: #72939a" ><a href="" id="blogName2" style="color: #f1f1f1">博客名</a></div>
            <div class="layui-card-wyp1-body" style="font-size:20px;background-color: #72939a"><a href="" id="content2" style="color: #f1a77b">博客内容</a></div>
            <div class="layui-card-wyp2-body layui-icon" style="font-size:13px;background-color: #72939a">
                <a href="" class="layui-icon-note" id="blogType2" style="margin-left: 5px;color: #e0cce2">技术分享</a>
                <a href="javascript:" class="layui-icon-date" id="time2" style="margin-left: 280px;color: #e0cce2">上传时间:2019.11.5</a>
                <a href="javascript:" class="layui-icon-rate" id="collections2" style="margin-left: 30px;color: #e0cce2">收藏(0)</a>
                <a href="javascript:" class="layui-icon-praise" id="fabulous2" style="margin-left: 30px;color: #e0cce2">点赞(0)</a>
                <a href="javascript:" class="layui-icon-reply-fill" id="comments2" style="margin-left: 30px;color: #e0cce2">评论(0)</a>
                <a href="javascript:" class="layui-icon-read" id="visit2" style="margin-left: 30px;color: #e0cce2">浏览(0)</a>
            </div>
        </div>
        <div class="layui-card" id="div3" style="margin-left: 40px;margin-right: 20px;display: block">
            <div id="blogId3" style="display:none"></div>
            <div class="layui-card-wyp-header" style="font-size:25px;background-color: #72939a"><a href="" id="blogName3" style="color: #f1f1f1">博客名</a></div>
            <div class="layui-card-wyp1-body" style="font-size:20px;background-color: #72939a"><a href="" id="content3" style="color: #f1a77b">博客内容</a></div>
            <div class="layui-card-wyp2-body layui-icon" style="font-size:13px;background-color: #72939a">
                <a href="" class="layui-icon-note" id="blogType3" style="margin-left: 5px;color: #e0cce2">技术分享</a>
                <a href="javascript:" class="layui-icon-date" id="time3" style="margin-left: 280px;color: #e0cce2">上传时间:2019.11.5</a>
                <a href="javascript:" class="layui-icon-rate" id="collections3" style="margin-left: 30px;color: #e0cce2">收藏(0)</a>
                <a href="javascript:" class="layui-icon-praise" id="fabulous3" style="margin-left: 30px;color: #e0cce2">点赞(0)</a>
                <a href="javascript:" class="layui-icon-reply-fill" id="comments3" style="margin-left: 30px;color: #e0cce2">评论(0)</a>
                <a href="javascript:" class="layui-icon-read" id="visit3" style="margin-left: 30px;color: #e0cce2">浏览(0)</a>
            </div>
        </div>
        <div class="layui-card" id="div4" style="margin-left: 40px;margin-right: 20px;display: block">
            <div id="blogId4" style="display:none"></div>
            <div class="layui-card-wyp-header" style="font-size:25px;background-color: #72939a" ><a href="" id="blogName4" style="color: #f1f1f1">博客名</a></div>
            <div class="layui-card-wyp1-body"  style="font-size:20px;background-color: #72939a"><a href="" id="content4" style="color: #f1a77b">博客内容</a></div>
            <div class="layui-card-wyp2-body layui-icon" style="font-size:13px;background-color: #72939a">
                <a href="" class="layui-icon-note" id="blogType4" style="margin-left: 5px;color: #e0cce2">技术分享</a>
                <a href="javascript:" class="layui-icon-date" id="time4" style="margin-left: 280px;color: #e0cce2">上传时间:2019.11.5</a>
                <a href="javascript:" class="layui-icon-rate" id="collections4" style="margin-left: 30px;color: #e0cce2">收藏(0)</a>
                <a href="javascript:" class="layui-icon-praise" id="fabulous4" style="margin-left: 30px;color: #e0cce2">点赞(0)</a>
                <a href="javascript:" class="layui-icon-reply-fill" id="comments4" style="margin-left: 30px;color: #e0cce2">评论(0)</a>
                <a href="javascript:" class="layui-icon-read" id="visit4" style="margin-left: 30px;color: #e0cce2">浏览(0)</a>
            </div>
        </div>
        <div class="layui-card" id="div5" style="margin-left: 40px;margin-right: 20px;display: block">
            <div id="blogId5" style="display:none"></div>
            <div class="layui-card-wyp-header" style="font-size:25px;background-color: #72939a" ><a href="" id="blogName5" style="color: #f1f1f1">博客名</a></div>
            <div class="layui-card-wyp1-body"  style="font-size:20px;background-color: #72939a"><a href="" id="content5" style="color: #f1a77b">博客内容</a></div>
            <div class="layui-card-wyp2-body layui-icon" style="font-size:13px;background-color: #72939a">
                <a href="" class="layui-icon-note" id="blogType5" style="margin-left: 5px;color: #e0cce2">技术分享</a>
                <a href="javascript:" class="layui-icon-date" id="time5" style="margin-left: 280px;color: #e0cce2">上传时间:2019.11.5</a>
                <a href="javascript:" class="layui-icon-rate" id="collections5" style="margin-left: 30px;color: #e0cce2">收藏(0)</a>
                <a href="javascript:" class="layui-icon-praise" id="fabulous5" style="margin-left: 30px;color: #e0cce2">点赞(0)</a>
                <a href="javascript:" class="layui-icon-reply-fill" id="comments5" style="margin-left: 30px;color: #e0cce2">评论(0)</a>
                <a href="javascript:" class="layui-icon-read" id="visit5" style="margin-left: 30px;color: #e0cce2">浏览(0)</a>
            </div>
        </div>
        <div class="layui-card" style="margin-left: 40px;margin-right: 20px">
            <div class="layui-card-wyp2-header" style="font-size:20px;background-color: blanchedalmond">
                <button class="layui-btn layui-btn-radius" type="button" style="margin-left: 100px;" id="upPage">上一页</button>
                <button class="layui-btn layui-btn-radius" type="button" style="margin-left: 600px;" id="downPage">下一页</button>
            </div>
        </div>

    </div>
</div>
</body>
<script>
    layui.use(['element','layer'] , function(){
        var ab = layui.jquery
            ,element = layui.element; //Tab的切换功能，切换事件监听等，需要依赖element模块
        var layer = layui.layer;
        var numberOne = 0;
        var numberSum = 0;
        window.onload = function(){
            func1();
            func2();
            func3();
        };
        function func1() {
            $.ajax({
                url: "getUserInfo",
                type: "GET",
                contentType: "application/json",
                async: true,
                success: function (data) {
                    console.log(data);
                    if (data.flag == true) {
                        $("#nameOne").text(data.data["userName"]);
                        $("#userName").text(data.data["userName"]);
                        $("#phone").text(data.data["phone"]);
                        $("#email").text(data.data["email"]);
                        $("#sex").text(data.data["sex"]);
                        $("#trade").text(data.data["trade"]);
                        $("#introduction").text(data.data["introduction"]);
                        $("#creatDate").text(data.data["registerDate"]);
                    }
                }
            });
        }
        function func2(){
            $.ajax({
                url: "userBlogs",
                type: "GET",
                contentType: "application/json",
                async: true,
                success: function (data) {
                    console.log(data);
                    if (data.flag == true) {
                        console.log(data);
                        nu = 1;
                        numberSum = data.data.length;
                        for(var w=data.data.length-1-numberOne;w>=data.data.length-5-numberOne;w--)
                        {
                            $("#blogId"+nu).text(data.data[w]["blogId"]);
                            $("#blogName"+nu).text(data.data[w]["blogName"]);
                            $("#content"+nu).html(data.data[w]["blogContent"].substring(0,70)+".............");
                            if (data.data[w]["blogType"]==0){
                                $("#blogType"+nu).text("技术分享");
                            }else if (data.data[w]["blogType"]==1){
                                $("#blogType"+nu).text("生活乐趣");
                            }else {
                                $("#blogType"+nu).text("未知");
                            }
                            $("#time"+nu).text("上传时间:"+data.data[w]["createDate"]);
                            $("#collections"+nu).text("收藏("+data.data[w]["collections"]+")");
                            $("#fabulous"+nu).text("点赞("+data.data[w]["fabulous"]+")");
                            $("#comments"+nu).text("评论("+data.data[w]["comments"]+")");
                            $("#visit"+nu).text("浏览("+data.data[w]["visit"]+")");
                            if (w==0){
                                console.log(nu);
                                for (var i=nu+1;i<=5;i++) {
                                    $("#blogName"+i).text("");
                                    $("#content"+i).text("");
                                    $("#blogType"+i).text("");
                                    $("#time"+i).text("");
                                    $("#collections"+i).text("");
                                    $("#fabulous"+i).text("");
                                    $("#comments"+i).text("");
                                    $("#visit"+i).text("");
                                }
                                break;
                            }
                            nu++;
                        }
                    }
                }
            })
        }
        //用户总数
        function func3(){
            $.ajax({
                url: "userSum",
                type: "GET",
                contentType: "application/json",
                async: true,
                success: function (data) {
                    console.log(data);
                    if (data.flag == true) {
                        console.log(data);
                        $("#blogSum").text(data.data["blogs"]);
                        $("#fansSum").text(data.data["fans"]);
                        $("#flowSum").text(data.data["flows"]);
                        $("#collectionsSum").text(data.data["collections"]);
                        $("#fablousSum").text(data.data["fabulous"]);
                        $("#visitSum").text(data.data["visit"]);
                    }
                }
            })
        }
        //上一页
        $("#upPage").on("click",function(){
            upPage();
        });
        function upPage(){
            numberOne = numberOne-5;
            if (numberOne<=-5){
                numberOne = 0;
                layer.open({
                    title: '提示'
                    , icon:0
                    , content: '不能再上一页啦，已经到头了'
                });
            }else{
                func2();
            }
        }
        //下一页
        $("#downPage").on("click",function () {
            downPage();
        });
        function downPage(){
            numberOne = numberOne +5;
            if (numberOne >=numberSum){
                numberOne = numberOne -5;
                layer.open({
                    title: '提示'
                    , icon:0
                    , content: '不能再下一页啦，已经到头了'
                })
            }else {
                func2()
            }
        }
        //点赞
        $("#fabulous1").on("click",function(){
            fabulous1();
        });
        function fabulous1(){
            var blogId = document.getElementById("blogId1").textContent;
            $.ajax({
                url: "fabulousBlog",
                type: "POST",
                contentType: "application/json",
                data:"{\"blogId\":\"" + blogId + "\"}",
                async: true,
                success: function (data) {
                    console.log(data);
                    if (data.flag == true) {
                        layer.msg("点赞成功", {
                            icon: 1
                        });
                        $.ajax({
                            url: "selectFabulous",
                            type: "POST",
                            contentType: "application/json",
                            data:"{\"blogId\":\"" + blogId + "\"}",
                            async: true,
                            success: function (data) {
                                console.log(data);
                                $("#fabulous1").text("点赞("+data.data+")");
                            }
                        })
                    }else if (data.flag == false) {
                        layer.msg("取消成功", {
                            icon: 1
                        });
                        $.ajax({
                            url: "selectFabulous",
                            type: "POST",
                            contentType: "application/json",
                            data:"{\"blogId\":\"" + blogId + "\"}",
                            async: true,
                            success: function (data) {
                                console.log(data);
                                $("#fabulous1").text("点赞("+data.data+")");
                            }
                        })
                    }
                }
            });
        }
        $("#fabulous2").on("click",function(){
            fabulous2();
        });
        function fabulous2(){
            var blogId = document.getElementById("blogId2").textContent;
            $.ajax({
                url: "fabulousBlog",
                type: "POST",
                contentType: "application/json",
                data:"{\"blogId\":\"" + blogId + "\"}",
                async: true,
                success: function (data) {
                    console.log(data);
                    if (data.flag == true) {
                        layer.msg("点赞成功", {
                            icon: 1
                        });
                        $.ajax({
                            url: "selectFabulous",
                            type: "POST",
                            contentType: "application/json",
                            data:"{\"blogId\":\"" + blogId + "\"}",
                            async: true,
                            success: function (data) {
                                console.log(data);
                                $("#fabulous2").text("点赞("+data.data+")");
                            }
                        })
                    }else if (data.flag == false) {
                        layer.msg("取消成功", {
                            icon: 1
                        });
                        $.ajax({
                            url: "selectFabulous",
                            type: "POST",
                            contentType: "application/json",
                            data:"{\"blogId\":\"" + blogId + "\"}",
                            async: true,
                            success: function (data) {
                                console.log(data);
                                $("#fabulous2").text("点赞("+data.data+")");
                            }
                        })
                    }
                }
            });
        }
        $("#fabulous3").on("click",function(){
            fabulous3();
        });
        function fabulous3(){
            var blogId = document.getElementById("blogId3").textContent;
            $.ajax({
                url: "fabulousBlog",
                type: "POST",
                contentType: "application/json",
                data:"{\"blogId\":\"" + blogId + "\"}",
                async: true,
                success: function (data) {
                    console.log(data);
                    if (data.flag == true) {
                        layer.msg("点赞成功", {
                            icon: 1
                        });
                        $.ajax({
                            url: "selectFabulous",
                            type: "POST",
                            contentType: "application/json",
                            data:"{\"blogId\":\"" + blogId + "\"}",
                            async: true,
                            success: function (data) {
                                console.log(data);
                                $("#fabulous3").text("点赞("+data.data+")");
                            }
                        })
                    }else if (data.flag == false) {
                        layer.msg("取消成功", {
                            icon: 1
                        });
                        $.ajax({
                            url: "selectFabulous",
                            type: "POST",
                            contentType: "application/json",
                            data:"{\"blogId\":\"" + blogId + "\"}",
                            async: true,
                            success: function (data) {
                                console.log(data);
                                $("#fabulous3").text("点赞("+data.data+")");
                            }
                        })
                    }
                }
            });
        }
        $("#fabulous4").on("click",function(){
            fabulous4();
        });
        function fabulous4(){
            var blogId = document.getElementById("blogId4").textContent;
            $.ajax({
                url: "fabulousBlog",
                type: "POST",
                contentType: "application/json",
                data:"{\"blogId\":\"" + blogId + "\"}",
                async: true,
                success: function (data) {
                    console.log(data);
                    if (data.flag == true) {
                        layer.msg("点赞成功", {
                            icon: 1
                        });
                        $.ajax({
                            url: "selectFabulous",
                            type: "POST",
                            contentType: "application/json",
                            data:"{\"blogId\":\"" + blogId + "\"}",
                            async: true,
                            success: function (data) {
                                console.log(data);
                                $("#fabulous4").text("点赞("+data.data+")");
                            }
                        })
                    }else if (data.flag == false) {
                        layer.msg("取消成功", {
                            icon: 1
                        });
                        $.ajax({
                            url: "selectFabulous",
                            type: "POST",
                            contentType: "application/json",
                            data:"{\"blogId\":\"" + blogId + "\"}",
                            async: true,
                            success: function (data) {
                                console.log(data);
                                $("#fabulous4").text("点赞("+data.data+")");
                            }
                        })
                    }
                }
            });
        }
        $("#fabulous5").on("click",function(){
            fabulous5();
        });
        function fabulous5(){
            var blogId = document.getElementById("blogId5").textContent;
            $.ajax({
                url: "fabulousBlog",
                type: "POST",
                contentType: "application/json",
                data:"{\"blogId\":\"" + blogId + "\"}",
                async: true,
                success: function (data) {
                    console.log(data);
                    if (data.flag == true) {
                        layer.msg("点赞成功", {
                            icon: 1
                        });
                        $.ajax({
                            url: "selectFabulous",
                            type: "POST",
                            contentType: "application/json",
                            data:"{\"blogId\":\"" + blogId + "\"}",
                            async: true,
                            success: function (data) {
                                console.log(data);
                                $("#fabulous5").text("点赞("+data.data+")");
                            }
                        })
                    }else if (data.flag == false) {
                        layer.msg("取消成功", {
                            icon: 1
                        });
                        $.ajax({
                            url: "selectFabulous",
                            type: "POST",
                            contentType: "application/json",
                            data:"{\"blogId\":\"" + blogId + "\"}",
                            async: true,
                            success: function (data) {
                                console.log(data);
                                $("#fabulous5").text("点赞("+data.data+")");
                            }
                        })
                    }
                }
            });
        }

        $("#collections1").on("click",function () {
            collections1();
        });
        function collections1(){
            var blogId = document.getElementById("blogId1").textContent;
            $.ajax({
                url: "userCollectionBlogs",
                type: "POST",
                contentType: "application/json",
                data:"{\"blogId\":\"" + blogId + "\"}",
                async: true,
                success: function (data) {
                    console.log(data);
                    if (data.flag == true) {
                        layer.msg("收藏成功", {
                            icon: 1
                        });
                        $.ajax({
                            url: "selectCollections",
                            type: "POST",
                            contentType: "application/json",
                            data:"{\"blogId\":\"" + blogId + "\"}",
                            async: true,
                            success: function (data) {
                                console.log(data);
                                $("#collections1").text("收藏("+data.data+")");
                            }
                        })
                    }else if (data.flag == false) {
                        layer.msg("取消成功", {
                            icon: 1
                        });
                        $.ajax({
                            url: "selectCollections",
                            type: "POST",
                            contentType: "application/json",
                            data:"{\"blogId\":\"" + blogId + "\"}",
                            async: true,
                            success: function (data) {
                                console.log(data);
                                $("#collections1").text("收藏("+data.data+")");
                            }
                        })
                    }
                }
            });
        }

        $("#collections2").on("click",function(){
            collections2();
        });
        function collections2(){
            var blogId = document.getElementById("blogId2").textContent;
            $.ajax({
                url: "userCollectionBlogs",
                type: "POST",
                contentType: "application/json",
                data:"{\"blogId\":\"" + blogId + "\"}",
                async: true,
                success: function (data) {
                    console.log(data);
                    if (data.flag == true) {
                        layer.msg("收藏成功", {
                            icon: 1
                        });
                        $.ajax({
                            url: "selectCollections",
                            type: "POST",
                            contentType: "application/json",
                            data:"{\"blogId\":\"" + blogId + "\"}",
                            async: true,
                            success: function (data) {
                                console.log(data);
                                $("#collections2").text("收藏("+data.data+")");
                            }
                        })
                    }else if (data.flag == false) {
                        layer.msg("取消成功", {
                            icon: 1
                        });
                        $.ajax({
                            url: "selectCollections",
                            type: "POST",
                            contentType: "application/json",
                            data:"{\"blogId\":\"" + blogId + "\"}",
                            async: true,
                            success: function (data) {
                                console.log(data);
                                $("#collections2").text("收藏("+data.data+")");
                            }
                        })
                    }
                }
            });
        }
        $("#collections3").on("click",function(){
            collections3();
        });
        function collections3(){
            var blogId = document.getElementById("blogId3").textContent;
            $.ajax({
                url: "userCollectionBlogs",
                type: "POST",
                contentType: "application/json",
                data:"{\"blogId\":\"" + blogId + "\"}",
                async: true,
                success: function (data) {
                    console.log(data);
                    if (data.flag == true) {
                        layer.msg("收藏成功", {
                            icon: 1
                        });
                        $.ajax({
                            url: "selectCollections",
                            type: "POST",
                            contentType: "application/json",
                            data:"{\"blogId\":\"" + blogId + "\"}",
                            async: true,
                            success: function (data) {
                                console.log(data);
                                $("#collections3").text("收藏("+data.data+")");
                            }
                        })
                    }else if (data.flag == false) {
                        layer.msg("取消成功", {
                            icon: 1
                        });
                        $.ajax({
                            url: "selectCollections",
                            type: "POST",
                            contentType: "application/json",
                            data:"{\"blogId\":\"" + blogId + "\"}",
                            async: true,
                            success: function (data) {
                                console.log(data);
                                $("#collections3").text("收藏("+data.data+")");
                            }
                        })
                    }
                }
            });
        }

        $("#collections4").on("click",function(){
            collections4();
        });
        function collections4(){
            var blogId = document.getElementById("blogId4").textContent;
            $.ajax({
                url: "userCollectionBlogs",
                type: "POST",
                contentType: "application/json",
                data:"{\"blogId\":\"" + blogId + "\"}",
                async: true,
                success: function (data) {
                    console.log(data);
                    if (data.flag == true) {
                        layer.msg("收藏成功", {
                            icon: 1
                        });
                        $.ajax({
                            url: "selectCollections",
                            type: "POST",
                            contentType: "application/json",
                            data:"{\"blogId\":\"" + blogId + "\"}",
                            async: true,
                            success: function (data) {
                                console.log(data);
                                $("#collections4").text("收藏("+data.data+")");
                            }
                        })
                    }else if (data.flag == false) {
                        layer.msg("取消成功", {
                            icon: 1
                        });
                        $.ajax({
                            url: "selectCollections",
                            type: "POST",
                            contentType: "application/json",
                            data:"{\"blogId\":\"" + blogId + "\"}",
                            async: true,
                            success: function (data) {
                                console.log(data);
                                $("#collections4").text("收藏("+data.data+")");
                            }
                        })
                    }
                }
            });
        }
        $("#collections5").on("click",function(){
            collections5();
        });
        function collections5(){
            var blogId = document.getElementById("blogId5").textContent;
            $.ajax({
                url: "userCollectionBlogs",
                type: "POST",
                contentType: "application/json",
                data:"{\"blogId\":\"" + blogId + "\"}",
                async: true,
                success: function (data) {
                    console.log(data);
                    if (data.flag == true) {
                        layer.msg("收藏成功", {
                            icon: 1
                        });
                        $.ajax({
                            url: "selectCollections",
                            type: "POST",
                            contentType: "application/json",
                            data:"{\"blogId\":\"" + blogId + "\"}",
                            async: true,
                            success: function (data) {
                                console.log(data);
                                $("#collections5").text("收藏("+data.data+")");
                            }
                        })
                    }else if (data.flag == false) {
                        layer.msg("取消成功", {
                            icon: 1
                        });
                        $.ajax({
                            url: "selectCollections",
                            type: "POST",
                            contentType: "application/json",
                            data:"{\"blogId\":\"" + blogId + "\"}",
                            async: true,
                            success: function (data) {
                                console.log(data);
                                $("#collections5").text("收藏("+data.data+")");
                            }
                        })
                    }
                }
            });
        }

        $("#updateInfo").on("click",function(){
            update();
        });
        function update() {
            var userName = document.getElementById("userName").textContent;
            var phone = document.getElementById("phone").textContent;
            var email = document.getElementById("email").textContent;
            var sex = document.getElementById("sex").textContent;
            var trade = document.getElementById("trade").textContent;
            var introduction = document.getElementById("introduction").textContent;
            layer.open({
                title: '修改个人信息',
                content: '' +
                '<div class="layui-form-item"><label class="wyp-form-label">用户名:</label><div class="wyp-input-block"><input type="text" id="userName2" name="userName2" value='+userName+' autocomplete="off" class="layui-input"></div></div>' +
                '<div class="layui-form-item"><label class="wyp-form-label">手机号:</label><div class="wyp-input-block"><input type="text" id="phone2" name="phone2" value='+phone+' autocomplete="off" class="layui-input" readonly></div></div>' +
                    '<div class="layui-form-item"><label class="wyp-form-label">邮箱:</label><div class="wyp-input-block"><input type="text" id="email2" name="email2" value='+email+' autocomplete="off" class="layui-input"></div></div>' +
                    '<div class="layui-form-item"><label class="wyp-form-label">性别:</label><div class="wyp-input-block"><input type="text" id="sex2" name="sex2" value='+sex+' autocomplete="off" class="layui-input"></div></div>' +
                    '<div class="layui-form-item"><label class="wyp-form-label">职业:</label><div class="wyp-input-block"><input type="text" id="trade2" name="trade2" value='+trade+' autocomplete="off" class="layui-input"></div></div>' +
                    '<div class="layui-form-item"><label class="wyp-form-label">简介:</label><div class="wyp-input-block"><input type="text" id="introduction2" name="introduction2" value='+introduction+' autocomplete="off" class="layui-input"></div></div>'
                ,
                btn: ['修改'],
                area: ['380px', '450px'],
                btn1: function () {
                    var userName2 = $('#userName2').val();
                    var sex2 = $('#sex2').val();
                    var email2 = $('#email2').val();
                    var trade2 = $('#trade2').val();
                    var introduction2 = $('#introduction2').val();
                    if (userName2 == '' || userName2 == null) {
                        alert("用户名不能为空");
                    } else if (email2 == '' || email2 == null) {
                        alert("邮箱不能为空");
                    } else if (sex2 == '' || sex2 == null) {
                        alert("性别不能为空");
                    } else if (trade2 == '' || trade2 == null) {
                        alert("职业不能为空");
                    } else if (introduction2 == '' || introduction2 == null){
                        alert("请输入简介")
                    } else {
                        $.ajax({
                            url: "userInfo",
                            type: "POST",
                            contentType: "application/json",
                            data: "{\"userName\":\"" + userName2 + "\",\"email\":\"" + email2 + "\",\"sex\":\"" + sex2 + "\",\"trade\":\"" + trade2 + "\",\"introduction\":\"" + introduction2 + "\"}",
                            async: true,
                            success: function (data) {
                                console.log(data);
                                if (data.flag == true) {
                                    layer.open({
                                        title: '提示'
                                        , content: '温馨提示:修改成功！'
                                        , btn:['确认']
                                        , btn1:function () {
                                            window.location = 'userInfo.html'
                                        }
                                    });
                                }else {
                                    var msg = "code:" + data.code + ";desc:" + data.desc;
                                    layer.msg(msg, {
                                        anim: 6,
                                        icon: 2,
                                        time: 5000
                                    });
                                }
                            },
                            error: function (xhr, textStatus, errorThrown) {
                                var msg = xhr.responseText;
                                var response = JSON.parse(msg);

                                layer.msg(msg, {
                                    anim: 6,
                                    icon: 2,
                                    time: 5000
                                });
                            }
                        });
                    }
                }
            })
        }
        //触发事件
        var active = {
            tabAdd: function(){
                //新增一个Tab项
                element.tabAdd('demo', {
                    title: '新选项'+ (Math.random()*1000|0) //用于演示
                    ,content: '内容'+ (Math.random()*1000|0)
                    ,id: new Date().getTime() //实际使用一般是规定好的id，这里以时间戳模拟下
                })
            }
            ,tabDelete: function(othis){
                //删除指定Tab项
                element.tabDelete('demo', '44'); //删除：“商品管理”


                othis.addClass('layui-btn-disabled');
            }
            ,tabChange: function(){
                //切换到指定Tab项
                element.tabChange('demo', '22'); //切换到：用户管理
            }
        };

        ab('.site-demo-active').on('click', function(){
            var othis = ab(this), type = othis.data('type');
            active[type] ? active[type].call(this, othis) : '';
        });

        //Hash地址的定位
        var layid = location.hash.replace(/^#test=/, '');
        element.tabChange('test', layid);

        element.on('tab(test)', function(elem){
            location.hash = 'test='+ ab(this).attr('lay-id');
        });

    });


</script>

</html>
